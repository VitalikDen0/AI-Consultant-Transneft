# ๐ค AI-ะะพะฝััะปััะฐะฝั ยซะขัะฐะฝัะฝะตัััยป

**ะัะพะตะบั:** ยซะขัะฐะฝัะฝะตััั โ ะขะตัะฝะพะปะพะณะธะธยป  
**ะะฐะทัะฐะฑะพััะธะบ:** ะะตะฝะธัะพะฒ ะะธัะฐะปะธะน ะะฒะณะตะฝะธะตะฒะธั, ะะตะฒััะบ ะะฐะปะตัะธั ะกะตัะณะตะตะฒะฝะฐ  
**ะัะณะฐะฝะธะทะฐัะธั:** ะะะ ยซะขัะฐะฝัะฝะตัััยป

---

## ๐น ะะธะดะตะพะฟัะตะทะตะฝัะฐัะธั

https://github.com/user-attachments/assets/aaf842ed-6884-4f4b-ba7d-508f62f3c490

---
P.s. ะะพะปะพั ะฒััะตะทะฐะปัั, ะบะฐะบ ะธ ะพะทะฒััะบะฐ, ะฝะพ ะพะฝะฐ ะตััั.
## ๐ ะกะพะดะตัะถะฐะฝะธะต

1. [ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ](#-ะพะฟะธัะฐะฝะธะต-ะฟัะพะตะบัะฐ)
2. [ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ](#-ัะตัะฝะพะปะพะณะธัะตัะบะธะน-ััะตะบ)
3. [ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ](#-ะฐััะธัะตะบัััะฐ-ะฟัะพะตะบัะฐ)
4. [ะกัััะบัััะฐ ัะฐะนะปะพะฒ](#-ััััะบัััะฐ-ัะฐะนะปะพะฒ)
5. [ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั](#-ะบะปััะตะฒัะต-ะบะพะผะฟะพะฝะตะฝัั)
6. [ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ](#-ัััะฐะฝะพะฒะบะฐ-ะธ-ะทะฐะฟััะบ)
7. [ะะพะฝัะธะณััะฐัะธั](#-ะบะพะฝัะธะณััะฐัะธั)
8. [ะัะฟะพะปัะทะพะฒะฐะฝะธะต](#-ะธัะฟะพะปัะทะพะฒะฐะฝะธะต)
9. [ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ](#-ัะตัะฝะธัะตัะบะธะต-ะดะตัะฐะปะธ)
10. [ะัะพะฑะตะฝะฝะพััะธ ัะตะฐะปะธะทะฐัะธะธ](#-ะพัะพะฑะตะฝะฝะพััะธ-ัะตะฐะปะธะทะฐัะธะธ)

---

## ๐ฏ ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

**AI-ะะพะฝััะปััะฐะฝั ยซะขัะฐะฝัะฝะตัััยป** โ ััะพ ะธะฝัะตะปะปะตะบััะฐะปัะฝะฐั ัะธััะตะผะฐ ะฝะฐ ะฑะฐะทะต ะปะพะบะฐะปัะฝะพะน ัะทัะบะพะฒะพะน ะผะพะดะตะปะธ **Qwen3-4B-Thinking**, ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฝะฐั ะดะปั ะพัะฒะตัะฐ ะฝะฐ ะฒะพะฟัะพัั ะพ ะบะพะผะฟะฐะฝะธะธ ะะะ ยซะขัะฐะฝัะฝะตัััยป. ะกะธััะตะผะฐ ะพัะฝะฐัะตะฝะฐ ะธะฝัะตัะฐะบัะธะฒะฝัะผ 3D-ะฟะตััะพะฝะฐะถะตะผ ั ะฐะฝะธะผะฐัะธัะผะธ, ะฟะพะดะดะตัะถะบะพะน ะณะพะปะพัะพะฒะพะณะพ ะฒะฒะพะดะฐ, ะพะทะฒััะธะฒะฐะฝะธั ะพัะฒะตัะพะฒ ะธ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะถะตััะพะฒ.

### ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

- โ **ะะพะบะฐะปัะฝะฐั AI ะผะพะดะตะปั** โ ัะฐะฑะพัะฐะตั ะฑะตะท ะธะฝัะตัะฝะตัะฐ, ะฟะพะปะฝะฐั ะบะพะฝัะธะดะตะฝัะธะฐะปัะฝะพััั ะดะฐะฝะฝัั
- โ **ะะตะถะธะผ "Thinking"** โ ะผะพะดะตะปั ะฟะพะบะฐะทัะฒะฐะตั ะฟัะพัะตัั ัะฐัััะถะดะตะฝะธะน ะฟะตัะตะด ะพัะฒะตัะพะผ
- โ **3D ะฟะตััะพะฝะฐะถ** โ ะธะฝัะตัะฐะบัะธะฒะฝัะน ะฐะฝะธะผะธัะพะฒะฐะฝะฝัะน ะบะพะฝััะปััะฐะฝั ั 4 ะฐะฝะธะผะฐัะธัะผะธ
- โ **ะะพะปะพัะพะฒะพะน ะฒะฒะพะด** โ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะตัะธ ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะพะฟัะตะดะตะปะตะฝะธะตะผ ะฟะฐัะท
- โ **ะะทะฒััะธะฒะฐะฝะธะต ะพัะฒะตัะพะฒ** โ ัะธะฝัะตะท ัะตัะธ ะฝะฐ ััััะบะพะผ ัะทัะบะต
- โ **ะะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ะถะตััะพะฒ** โ ัะฟัะฐะฒะปะตะฝะธะต ัะตัะตะท ะบะฐะผะตัั (MediaPipe)
- โ **ะะฐะทะฐ ะทะฝะฐะฝะธะน** โ ััััะบัััะธัะพะฒะฐะฝะฝะฐั ะธะฝัะพัะผะฐัะธั ะพ ะบะพะผะฟะฐะฝะธะธ ะขัะฐะฝัะฝะตััั
- โ **ะะตะฑ-ะธะฝัะตััะตะนั** โ ัะพะฒัะตะผะตะฝะฝัะน responsive ะดะธะทะฐะนะฝ ั ะฟะพะดะดะตัะถะบะพะน ะฒัะตั ััะฝะบัะธะน

---

## ๐ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

### Backend

- **Python 3.10+** โ ะพัะฝะพะฒะฝะพะน ัะทัะบ ัะฐะทัะฐะฑะพัะบะธ
- **llama-cpp-python** โ ะธะฝัะตัะตะฝั GGUF ะผะพะดะตะปะตะน ั GPU ะฟะพะดะดะตัะถะบะพะน
- **Flask** โ ะฒะตะฑ-ััะตะนะผะฒะพัะบ ะดะปั API
- **MediaPipe** โ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ะถะตััะพะฒ ััะบ
- **SpeechRecognition** โ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะตัะธ (Google API)
- **pyttsx3** โ ัะธะฝัะตะท ัะตัะธ (Text-to-Speech)
- **OpenCV** โ ะพะฑัะฐะฑะพัะบะฐ ะฒะธะดะตะพ ั ะบะฐะผะตัั
- **NumPy** โ ะพะฑัะฐะฑะพัะบะฐ ะผะฐััะธะฒะพะฒ ะดะฐะฝะฝัั

### Frontend

- **HTML5 + CSS3** โ ััััะบัััะฐ ะธ ััะธะปะธะทะฐัะธั
- **JavaScript (ES6+)** โ ะปะพะณะธะบะฐ ะฟัะธะปะพะถะตะฝะธั
- **Three.js** โ 3D ัะตะฝะดะตัะธะฝะณ ะฟะตััะพะฝะฐะถะฐ
- **GLTFLoader** โ ะทะฐะณััะทะบะฐ 3D ะผะพะดะตะปะตะน
- **Server-Sent Events (SSE)** โ ัััะธะผะธะฝะณ ะพัะฒะตัะพะฒ ะพั AI

### AI ะผะพะดะตะปั

- **Qwen3-4B-Thinking** (abliterated, Q4_K_S ะบะฒะฐะฝัะธะทะฐัะธั)
- **Thinking mode** โ ะผะพะดะตะปั ะฟะพะบะฐะทัะฒะฐะตั ะฟัะพัะตัั ัะฐัััะถะดะตะฝะธั
- **ะะพะฝัะตะบัั:** 32K ัะพะบะตะฝะพะฒ
- **ะะฒะฐะฝัะธะทะฐัะธั:** Q4_K_S (ะพะฟัะธะผะฐะปัะฝัะน ะฑะฐะปะฐะฝั ะบะฐัะตััะฒะฐ ะธ ัะบะพัะพััะธ)

### 3D Assets

- **Blender** โ ัะพะทะดะฐะฝะธะต ะธ ะพะฑัะฐะฑะพัะบะฐ 3D ะผะพะดะตะปะธ
- **Mixamo** โ ะธััะพัะฝะธะบ ะฐะฝะธะผะฐัะธะน ะฟะตััะพะฝะฐะถะฐ
- **glTF/GLB ัะพัะผะฐั** โ ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะน ัะพัะผะฐั ะดะปั ะฒะตะฑะฐ

---

## ๐ ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    WEB ะะะขะะะคะะะก (Browser)                  โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ      โ
โ  โ  3D Characterโ  โ  Chat UI     โ  โ  Controls    โ      โ
โ  โ  (Three.js)  โ  โ  (Messages)  โ  โ  (Voice/Cam) โ      โ
โ  โโโโโโโโฌโโโโโโโโ  โโโโโโโโฌโโโโโโโโ  โโโโโโโโฌโโโโโโโโ      โ
โ         โ                 โ                 โ              โ
โโโโโโโโโโโผโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโ
          โ                 โ                 โ
          โ         AJAX/SSEโ                 โ
          โ                 โผ                 โ
โโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         โ         FLASK WEB SERVER (web_app.py)       โ
โ         โ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ      โ
โ         โ    โ  /api/chat (SSE streaming)      โ      โ
โ         โ    โ  /api/voice/start, /stop        โ      โ
โ         โ    โ  /api/camera/start, /stop       โ      โ
โ         โ    โ  /api/tts/speak                 โ      โ
โ         โ    โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโ      โ
โ         โ                  โ                          โ
โ         โโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                            โผ                          โ
โ         โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ         โ     CORE MODULES (Python Backend)       โ  โ
โ         โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค  โ
โ         โ  main.py         - LLM Engine            โ  โ
โ         โ  audio_handler   - Voice I/O             โ  โ
โ         โ  vision_handler  - Camera + Gestures     โ  โ
โ         โ  chat_logger     - Logging               โ  โ
โ         โ  config.py       - Configuration         โ  โ
โ         โโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โผ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ   LLAMA.CPP (C++ Backend)     โ
        โ   โโโโโโโโโโโโโโโโโโโโโโโโโ   โ
        โ   โ  Qwen3-4B-Thinking    โ   โ
        โ   โ  Model (GGUF)         โ   โ
        โ   โโโโโโโโโโโโโฌโโโโโโโโโโโโ   โ
        โโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ
                        โผ
                โโโโโโโโโโโโโโโโโ
                โ   GPU (CUDA)  โ
                โ   or CPU      โ
                โโโโโโโโโโโโโโโโโ
```

---

## ๐ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
ะขัะฐะฝัะฝะตััั-AI-ะะพะฝััะปััะฐะฝั/
โ
โโโ ๐ 3D/                              # 3D ัะตััััั
โ   โโโ Hello.fbx                       # ะะฝะธะผะฐัะธั ะฟัะธะฒะตัััะฒะธั
โ   โโโ Idle.fbx                        # ะะฝะธะผะฐัะธั ะพะถะธะดะฐะฝะธั
โ   โโโ Talking.fbx                     # ะะฝะธะผะฐัะธั ัะตัะธ
โ   โโโ Thinking.fbx                    # ะะฝะธะผะฐัะธั ัะฐะทะผััะปะตะฝะธั
โ   โโโ Bot.png                         # ะขะตะบััััะฐ ะฟะตััะพะฝะฐะถะฐ
โ   โโโ [ะธััะพะดะฝัะต ะผะพะดะตะปะธ]               # ะััะณะธะต ะธััะพะดะฝะธะบะธ
โ
โโโ ๐ chat_logs/                       # ะะพะณะธ ะดะธะฐะปะพะณะพะฒ
โ   โโโ *.log                           # ะคะฐะนะปั ะปะพะณะพะฒ ั timestamps
โ
โโโ ๐ static/                          # ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั
โ   โโโ css/
โ   โ   โโโ style.css                   # ะกัะธะปะธ ะธะฝัะตััะตะนัะฐ (17KB)
โ   โโโ images/
โ   โ   โโโ Transneft.png               # ะะพะณะพัะธะฟ ะบะพะผะฟะฐะฝะธะธ
โ   โโโ js/
โ   โ   โโโ app.js                      # ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ UI (27KB)
โ   โ   โโโ character3d.js              # 3D ะฟะตััะพะฝะฐะถ (12KB)
โ   โโโ models/
โ       โโโ transneft_character.glb     # 3D ะผะพะดะตะปั ั ะฐะฝะธะผะฐัะธัะผะธ
โ
โโโ ๐ templates/                       # HTML ัะฐะฑะปะพะฝั
โ   โโโ index.html                      # ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ
โ
โโโ ๐ main.py                          # ะัะฝะพะฒะฝะพะน ะผะพะดัะปั LLM (36KB)
โโโ ๐ config.py                        # ะะพะฝัะธะณััะฐัะธั ะฒัะตะน ัะธััะตะผั (13KB)
โโโ ๐ web_app.py                       # Flask ะฒะตะฑ-ัะตัะฒะตั (11KB)
โโโ ๐ audio_handler.py                 # ะะพะปะพัะพะฒะพะน ะฒะฒะพะด/ะฒัะฒะพะด (26KB)
โโโ ๐ vision_handler.py                # ะะฐะผะตัะฐ ะธ ะถะตััั (29KB)
โโโ ๐ chat_logger.py                   # ะะพะณะธัะพะฒะฐะฝะธะต ะดะธะฐะปะพะณะพะฒ (4KB)
โโโ ๐ import_model.py                  # ะะผะฟะพัั 3D ะผะพะดะตะปะธ ะฒ Blender (6KB)
โโโ ๐ QA.py                            # ะะตะฝัะผะฐัะบ ะฟะพ ะฒะพะฟัะพัะฐะผ (7KB)
โ
โโโ ๐ PROMT.md                         # ะะฐะทะฐ ะทะฝะฐะฝะธะน ะพ ะขัะฐะฝัะฝะตััั (9KB)
โโโ ๐ gobench.md                       # ะะฐะฑะพั ะฒะพะฟัะพัะพะฒ ะดะปั ัะตััะธัะพะฒะฐะฝะธั (4KB)
โโโ ๐ bench.md                         # ะะตะทัะปััะฐัั ะฑะตะฝัะผะฐัะบะพะฒ (5KB)
โโโ ๐ requirements.txt                 # Python ะทะฐะฒะธัะธะผะพััะธ
โ
โโโ ๐ install_and_run.bat              # ะะฒัะพัััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ (Windows)
โโโ ๐ README.md                        # ะญัะพั ัะฐะนะป
```

---

## ๐ ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั

### 1. **main.py** โ ะฏะดัะพ LLM ัะธััะตะผั

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐะณััะทะบะฐ, ัะฟัะฐะฒะปะตะฝะธะต ะธ ะธะฝัะตัะตะฝั ะปะพะบะฐะปัะฝะพะน ัะทัะบะพะฒะพะน ะผะพะดะตะปะธ.

**ะัะฝะพะฒะฝัะต ะบะปะฐััั:**

- **`LLMConfig`** โ ะทะฐะณััะถะฐะตั ะฝะฐัััะพะนะบะธ ะธะท `config.py` ะธ ะฟัะตะพะฑัะฐะทัะตั ะธั ะฒ ัะพัะผะฐั llama-cpp-python
- **`ThinkingLLM`** โ ะพะฑะตััะบะฐ ะดะปั ะผะพะดะตะปะธ ั ะฟะพะดะดะตัะถะบะพะน:
  - Thinking mode (ัะตะณะธ `<think>...</think>`)
  - ะััะพัะธั ะดะธะฐะปะพะณะฐ ั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะพะฑัะตะทะบะพะน ะฟะพ ัะพะบะตะฝะฐะผ
  - ะะฐะณััะทะบะฐ ะฑะฐะทั ะทะฝะฐะฝะธะน ะธะท PROMT.md
  - ะกัะฐัะธััะธะบะฐ ัะพะบะตะฝะพะฒ ะธ ัะบะพัะพััั ะณะตะฝะตัะฐัะธะธ

**ะะฝัะตัะตัะฝัะต ะพัะพะฑะตะฝะฝะพััะธ:**

- **ะะฒัะพะผะฐัะธัะตัะบะธะน fallback ะฝะฐ CPU** ะตัะปะธ GPU ะฝะตะดะพัััะฟะตะฝ
- **KV-cache ะบะฒะฐะฝัะธะทะฐัะธั (Q8_0)** ะดะปั ัะบะพะฝะพะผะธะธ VRAM
- **Flash Attention** ะดะปั ััะบะพัะตะฝะธั ะณะตะฝะตัะฐัะธะธ
- **ะะพะปะฝะฐั ะฒัะณััะทะบะฐ ะฝะฐ GPU** (`-1` layers) ะดะปั ะผะฐะบัะธะผะฐะปัะฝะพะน ัะบะพัะพััะธ
- **ะะฑัะตะทะบะฐ ะธััะพัะธะธ** โ ะพััะฐะฒะปัะตั ัะพะปัะบะพ ะฟะพัะปะตะดะฝะธะต N ัะพะบะตะฝะพะฒ, ััะพะฑั ะฝะต ะฟัะตะฒััะฐัั ะบะพะฝัะตะบัั

**ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**

```python
from main import ThinkingLLM, LLMConfig

config = LLMConfig()  # ะะฐะณััะทะบะฐ ะธะท config.py
llm = ThinkingLLM(config)

response = llm.generate_response("ะะพะณะดะฐ ะพัะฝะพะฒะฐะฝะฐ ะขัะฐะฝัะฝะตััั?")
print(response['thinking'])  # ะัะพัะตัั ัะฐะทะผััะปะตะฝะธั
print(response['answer'])    # ะคะธะฝะฐะปัะฝัะน ะพัะฒะตั
```

---

### 2. **config.py** โ ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะฐั ะบะพะฝัะธะณััะฐัะธั

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะดะธะฝะฐั ัะพัะบะฐ ะฝะฐัััะพะนะบะธ ะะกะะฅ ะฟะฐัะฐะผะตััะพะฒ ัะธััะตะผั.

**ะกะตะบัะธะธ:**

1. **ะะพะดะตะปั LLM** โ ะฟััั ะบ GGUF, ะบะพะฝัะตะบัั, GPU layers
2. **ะะฐะผััั ะธ ะพะฟัะธะผะธะทะฐัะธั** โ MMAP, MLOCK, KV-cache, Flash Attention
3. **ะะตะฝะตัะฐัะธั ัะตะบััะฐ** โ temperature, top-p, top-k, max tokens
4. **ะะพะปะพัะพะฒะพะน ะฒะฒะพะด (STT)** โ ะดะฒะธะถะพะบ, ัะทัะบ, ะฟะพัะพะณะธ ัะธัะธะฝั
5. **ะะทะฒััะธะฒะฐะฝะธะต (TTS)** โ ะดะฒะธะถะพะบ, ะณะพะปะพั, ัะบะพัะพััั, ะณัะพะผะบะพััั
6. **ะะฐะผะตัะฐ ะธ ะถะตััั** โ ัะฐะทัะตัะตะฝะธะต, FPS, ัะฒะตัะตะฝะฝะพััั ะดะตัะตะบัะธะธ
7. **ะัะปะฐะดะบะฐ** โ verbose ะปะพะณะธ, ะฟะพะบะฐะท thinking

**ะะฝัะตัะตัะฝัะต ะฟะฐัะฐะผะตััั:**

```python
# ะะฒัะพะผะฐัะธัะตัะบะพะต ะพัะบะปััะตะฝะธะต ะผะธะบัะพัะพะฝะฐ ะฟะพัะปะต 5 ัะตะบ ัะธัะธะฝั
INACTIVITY_TIMEOUT = 5.0

# ะะฒัะพะผะฐัะธัะตัะบะฐั ะพัะฟัะฐะฒะบะฐ ัะตะบััะฐ ะฟะพัะปะต 2 ัะตะบ ะฟะฐัะทั ะฒ ัะตัะธ
SILENCE_THRESHOLD = 2.0

# ะฃะฒะตะปะธัะตะฝะธะต ัะบะพัะพััะธ TTS ะฝะฐ 20% ะดะปั ะฑะพะปะตะต ะฑััััะพะน ัะตัะธ
TTS_RATE = 150  # โ ัะตะฐะปัะฝะพ 180 ัะปะพะฒ/ะผะธะฝ
```

---

### 3. **web_app.py** โ Flask ะฒะตะฑ-ัะตัะฒะตั

**ะะฐะทะฝะฐัะตะฝะธะต:** REST API ะดะปั ััะพะฝัะตะฝะดะฐ ั ะฟะพะดะดะตัะถะบะพะน ัััะธะผะธะฝะณะฐ.

**ะัะฝะพะฒะฝัะต ัะฝะดะฟะพะธะฝัั:**

| ะญะฝะดะฟะพะธะฝั | ะะตัะพะด | ะะฟะธัะฐะฝะธะต |
|----------|-------|----------|
| `/` | GET | ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ |
| `/api/chat` | POST | ะะตะฝะตัะฐัะธั ะพัะฒะตัะฐ (SSE streaming) |
| `/api/voice/start` | POST | ะะฐะฟััะบ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะณะพะปะพัะฐ |
| `/api/voice/stop` | POST | ะััะฐะฝะพะฒะบะฐ ะทะฐะฟะธัะธ |
| `/api/voice/get-text` | GET | ะะพะปััะตะฝะธะต ัะฐัะฟะพะทะฝะฐะฝะฝะพะณะพ ัะตะบััะฐ (polling) |
| `/api/tts/speak` | POST | ะะทะฒััะธะฒะฐะฝะธะต ัะตะบััะฐ |
| `/api/camera/start` | POST | ะะฐะฟััะบ ะบะฐะผะตัั ะธ ะถะตััะพะฒ |
| `/api/camera/stop` | POST | ะััะฐะฝะพะฒะบะฐ ะบะฐะผะตัั |
| `/api/gesture/get-text` | GET | ะะพะปััะตะฝะธะต ัะฐัะฟะพะทะฝะฐะฝะฝัั ะถะตััะพะฒ |
| `/api/reset` | POST | ะกะฑัะพั ะธััะพัะธะธ ะดะธะฐะปะพะณะฐ |

**ะะฝัะตัะตัะฝัะต ะพัะพะฑะตะฝะฝะพััะธ:**

- **SSE ัััะธะผะธะฝะณ** โ ะพัะฒะตัั ะฟะตัะตะดะฐัััั ะฟะพ ะฟัะตะดะปะพะถะตะฝะธัะผ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- **Long polling** โ ััะพะฝัะตะฝะด ะพะฟัะฐัะธะฒะฐะตั ัะตะบัั ะธะท ะณะพะปะพัะฐ/ะถะตััะพะฒ ะบะฐะถะดัะต 500ms
- **ะะฒัะพะฟะฐัะทะฐ ะถะตััะพะฒ** โ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ะฟัะธะพััะฐะฝะฐะฒะปะธะฒะฐะตััั ะฝะฐ ะฒัะตะผั ะพะฑัะฐะฑะพัะบะธ AI
- **Callback ัะธััะตะผะฐ** โ ะณะพะปะพั ะธ ะถะตััั ะธัะฟะพะปัะทััั ะบะพะปะฑัะบะธ ะดะปั ะฟะตัะตะดะฐัะธ ะดะฐะฝะฝัั

**ะะพะณะธะบะฐ ัะฐะฑะพัั ะณะพะปะพัะพะฒะพะณะพ ะฒะฒะพะดะฐ:**

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั ๐ค
2. Backend ะทะฐะฟััะบะฐะตั ะฝะตะฟัะตััะฒะฝัั ะทะฐะฟะธัั
3. ะะฐะถะดัะต 500ms ััะพะฝัะตะฝะด ะพะฟัะฐัะธะฒะฐะตั /api/voice/get-text
4. ะัะธ ะพะฑะฝะฐััะถะตะฝะธะธ 2 ัะตะบ ัะธัะธะฝั โ ัะตะบัั ัะฐัะฟะพะทะฝะฐะตััั
5. ะขะตะบัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพัะฟัะฐะฒะปัะตััั ะฒ /api/chat
6. ะะพัะปะต ะพัะฒะตัะฐ AI โ ะทะฐะฟะธัั ะฒะพะทะพะฑะฝะพะฒะปัะตััั
7. ะัะปะธ 5 ัะตะบ ะฝะตั ัะตัะธ โ ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะพัะบะปััะตะฝะธะต
```

---

### 4. **audio_handler.py** โ ะะพะปะพัะพะฒะพะน ะฒะฒะพะด/ะฒัะฒะพะด

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะตัะธ ะธ ัะธะฝัะตะท ะณะพะปะพัะฐ.

**ะัะฝะพะฒะฝัะต ะบะปะฐััั:**

- **`AudioConfig`** โ ะทะฐะณััะทะบะฐ ะฝะฐัััะพะตะบ ะธะท config.py
- **`SpeechRecognizer`** โ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะตัะธ (Google API)
- **`TextToSpeech`** โ ัะธะฝัะตะท ัะตัะธ (pyttsx3)
- **`AudioHandler`** โ ะพะฑัะตะดะธะฝัะตั STT ะธ TTS

**ะะฝัะตัะตัะฝัะต ะพัะพะฑะตะฝะฝะพััะธ:**

- **ะะฒัะพะผะฐัะธัะตัะบะธะน ะฒัะฑะพั ะผัะถัะบะพะณะพ ะณะพะปะพัะฐ** โ ะธัะตั ััััะบะธะต ะผัะถัะบะธะต ะณะพะปะพัะฐ ะฒ ัะธััะตะผะต
- **ะะตะฟัะตััะฒะฝะฐั ะทะฐะฟะธัั ั ัะฐะนะผะตัะฐะผะธ:**
  - 2 ัะตะบ ัะธัะธะฝั โ ะบะพะฝะตั ััะฐะทั โ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต
  - 5 ัะตะบ ะฑะตะท ัะตัะธ โ ะฟะพะปะฝะพะต ะพัะบะปััะตะฝะธะต
- **ะฃะฒะตะปะธัะตะฝะธะต ัะบะพัะพััะธ ัะตัะธ ะฝะฐ 20%** โ `TTS_RATE * 1.2` ะดะปั ะฑะพะปะตะต ะตััะตััะฒะตะฝะฝะพะณะพ ัะตะผะฟะฐ
- **ะัะธััะบะฐ ัะตะบััะฐ ะพั ัะผะพะดะทะธ** ะฟะตัะตะด ะพะทะฒััะบะพะน (ัะตะณัะปััะฝัะต ะฒััะฐะถะตะฝะธั)
- **ะัะธะฝััะพะฝะฝะฐั ะพะทะฒััะบะฐ** โ ะฝะต ะฑะปะพะบะธััะตั ะพัะฝะพะฒะฝะพะน ะฟะพัะพะบ

**ะัะธะผะตั:**

```python
from audio_handler import AudioHandler

audio = AudioHandler()

# ะะพะปะพัะพะฒะพะน ะฒะฒะพะด
text = audio.listen_for_question(timeout=10)
print(f"ะะฐัะฟะพะทะฝะฐะฝะพ: {text}")

# ะะทะฒััะธะฒะฐะฝะธะต ะพัะฒะตัะฐ
audio.speak_answer("ะขัะฐะฝัะฝะตััั ะพัะฝะพะฒะฐะฝะฐ ะฒ 1993 ะณะพะดั", play_async=True)
```

---

### 5. **vision_handler.py** โ ะะฐะผะตัะฐ ะธ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ะถะตััะพะฒ

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐะฑะพัะฐ ั ะบะฐะผะตัะพะน ะธ ะดะตัะตะบัะธั ะถะตััะพะฒ ััะบ ัะตัะตะท MediaPipe Tasks.

**ะัะฝะพะฒะฝัะต ะบะปะฐััั:**

- **`VisionConfig`** โ ะบะพะฝัะธะณััะฐัะธั ะบะฐะผะตัั ะธ MediaPipe
- **`MediaPipeGestureRecognizer`** โ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ะถะตััะพะฒ (MediaPipe Tasks API)
- **`CameraHandler`** โ ะทะฐัะฒะฐั ะฒะธะดะตะพ ั ะบะฐะผะตัั
- **`VisionHandler`** โ ะพะฑัะตะดะธะฝัะตั ะบะฐะผะตัั ะธ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต

**ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะถะตััั:**

| ะะตัั | ะะพะผะฐะฝะดะฐ | ะขะตะบัั ะดะปั AI |
|------|---------|--------------|
| โ Open Palm | ะัะธะฒะตัััะฒะธะต | "ะัะธะฒะตั" |
| โ๏ธ Victory | ะะพะฑะตะดะฐ | "ะะพะฑะตะดะฐ" |
| ๐ Thumb Up | ะะดะพะฑัะตะฝะธะต | "ะกัะฟะตั" |
| โ๏ธ Pointing Up | ะะฝะธะผะฐะฝะธะต | "ะะฝะธะผะฐะฝะธะต" |

**ะะฝัะตัะตัะฝัะต ะพัะพะฑะตะฝะฝะพััะธ:**

- **ะกะธััะตะผะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั** โ ะถะตัั ะดะพะปะถะตะฝ ะฟะพะฒัะพัััััั 3+ ัะฐะทะฐ ะทะฐ 1.5 ัะตะบ
- **ะะฒัะพะผะฐัะธัะตัะบะธะน ัะฐะนะผะฐัั** โ ะบะฐะผะตัะฐ ะพัะบะปััะฐะตััั ัะตัะตะท 7 ัะตะบ ะฑะตะท ะถะตััะพะฒ
- **ะะฐัะทะฐ ะฝะฐ ะฒัะตะผั ะพะฑัะฐะฑะพัะบะธ AI** โ ะถะตััั ะฝะต ัะฐัะฟะพะทะฝะฐัััั ะฟะพะบะฐ AI ะพัะฒะตัะฐะตั
- **MediaPipe Tasks API** โ ะฝะพะฒะตะนัะธะน API ั ะปัััะตะน ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพัััั

**ะะพะณะธะบะฐ ัะฐะฑะพัั:**

```
1. ะะฐัะฒะฐั ะบะฐะดัะฐ ั ะบะฐะผะตัั (16 FPS)
2. ะัะพะฟััะบ ะบะฐะดัะพะฒ (frame_skip=2) ะดะปั ัะบะพะฝะพะผะธะธ CPU
3. ะะตัะตะบัะธั ะถะตััะพะฒ ัะตัะตะท MediaPipe
4. ะะพะฑะฐะฒะปะตะฝะธะต ะฒ ะฑััะตั ะถะตััะพะฒ (1.5 ัะตะบ ะพะบะฝะพ)
5. ะัะปะธ ะถะตัั ะฟะพะฒัะพัะธะปัั โฅ3 ัะฐะท โ ะฟะพะดัะฒะตัะถะดะตะฝะธะต
6. ะัะฟัะฐะฒะบะฐ ัะตะบััะฐ ัะตัะตะท callback ะฒ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต
```

---

### 6. **chat_logger.py** โ ะะพะณะธัะพะฒะฐะฝะธะต ะดะธะฐะปะพะณะพะฒ

**ะะฐะทะฝะฐัะตะฝะธะต:** ะกะพััะฐะฝะตะฝะธะต ะธััะพัะธะธ ะดะธะฐะปะพะณะพะฒ ะฒ ัะฐะนะปั.

**ะคะพัะผะฐั ะปะพะณะฐ:**

```
================================================================================
CHAT LOG - AI-ะะพะฝััะปััะฐะฝั ะะะ ยซะขัะฐะฝัะฝะตัััยป
ะะฐัะฐ ะฝะฐัะฐะปะฐ ัะตััะธะธ: 2025-10-18 19:30:45
================================================================================

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
[19:30:52] ๐ฌ ะะะะฌะะะะะขะะะฌ (text):
ะะพะณะดะฐ ะพัะฝะพะฒะฐะฝะฐ ะขัะฐะฝัะฝะตััั?

[19:30:53] ๐ญ AI ะะะะะซะจะะะะะฏ (Thinking):
ะะพะปัะทะพะฒะฐัะตะปั ัะฟัะฐัะธะฒะฐะตั ะพ ะดะฐัะต ะพัะฝะพะฒะฐะฝะธั ะบะพะผะฟะฐะฝะธะธ...

[19:30:54] ๐ค AI ะะขะะะข:
ะะะ ยซะขัะฐะฝัะฝะตัััยป ะฑัะปะพ ัััะตะถะดะตะฝะพ 14 ะฐะฒะณัััะฐ 1993 ะณะพะดะฐ...
```

**ะัะพะฑะตะฝะฝะพััะธ:**

- **ะะฒัะพะผะฐัะธัะตัะบะธะต ะธะผะตะฝะฐ ัะฐะนะปะพะฒ** ั timestamp
- **ะะฐะทะดะตะปะตะฝะธะต thinking ะธ answer** ะดะปั ะฐะฝะฐะปะธะทะฐ
- **ะะตัะบะธ ะธััะพัะฝะธะบะฐ** โ text/voice/gesture
- **ะกัะฐัะธััะธะบะฐ ัะตััะธะธ** โ ะฒัะตะผั ะฝะฐัะฐะปะฐ/ะทะฐะฒะตััะตะฝะธั

---

### 7. **app.js** โ ะะพะณะธะบะฐ ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ

**ะะฐะทะฝะฐัะตะฝะธะต:** ะฃะฟัะฐะฒะปะตะฝะธะต UI, ะพัะฟัะฐะฒะบะฐ ะทะฐะฟัะพัะพะฒ, ะพะฑัะฐะฑะพัะบะฐ ัััะธะผะธะฝะณะฐ.

**ะัะฝะพะฒะฝะพะน ะบะปะฐัั:** `TransneftAssistant`

**ะะปััะตะฒัะต ะผะตัะพะดั:**

- `sendMessage(source)` โ ะพัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธั AI ัะตัะตะท SSE
- `toggleVoice()` โ ะฒะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต ะผะธะบัะพัะพะฝะฐ
- `toggleCamera()` โ ะฒะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต ะบะฐะผะตัั
- `toggleSpeaker()` โ ะฒะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต ะฐะฒัะพะพะทะฒััะบะธ
- `startVoicePolling()` โ ะพะฟัะพั ัะฐัะฟะพะทะฝะฐะฝะฝะพะณะพ ัะตะบััะฐ
- `startGesturePolling()` โ ะพะฟัะพั ะถะตััะพะฒ

**ะะฝัะตัะตัะฝัะต ะพัะพะฑะตะฝะฝะพััะธ:**

- **SSE ัััะธะผะธะฝะณ** โ ะพัะฒะตัั ะพะฑะฝะพะฒะปััััั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- **Long polling** โ ะพะฟัะพั ะณะพะปะพัะฐ/ะถะตััะพะฒ ะบะฐะถะดัะต 500ms
- **ะะฒัะพะฒะพะทะพะฑะฝะพะฒะปะตะฝะธะต** โ ะณะพะปะพั ะธ ะถะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒะพะทะพะฑะฝะพะฒะปััััั ะฟะพัะปะต ะพัะฒะตัะฐ
- **Markdown ัะตะฝะดะตัะธะฝะณ** โ ะฟะพะดะดะตัะถะบะฐ ะถะธัะฝะพะณะพ ัะตะบััะฐ, ะบะพะดะฐ, ัะฟะธัะบะพะฒ
- **Typing ะธะฝะดะธะบะฐัะพั** โ ะฐะฝะธะผะฐัะธั ะฟัะธ ะณะตะฝะตัะฐัะธะธ ะพัะฒะตัะฐ

**SSE ะพะฑัะฐะฑะพัะบะฐ:**

```javascript
const response = await fetch('/api/chat', {
    method: 'POST',
    body: JSON.stringify({ message, source })
});

const reader = response.body.getReader();
while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    
    // ะะฑัะฐะฑะพัะบะฐ events: thinking, answer, done
    if (data.type === 'thinking') {
        showThinking(data.content);
    } else if (data.type === 'answer') {
        updateMessage(data.content);
    }
}
```

---

### 8. **character3d.js** โ 3D ะฟะตััะพะฝะฐะถ

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐะณััะทะบะฐ ะธ ัะฟัะฐะฒะปะตะฝะธะต 3D ะผะพะดะตะปัั ั ะฐะฝะธะผะฐัะธัะผะธ.

**ะัะฝะพะฒะฝะพะน ะบะปะฐัั:** `Character3D`

**ะะฝะธะผะฐัะธะธ:**

1. **Hello** โ ะฟัะธะฒะตัััะฒะตะฝะฝัะน ะถะตัั (ัะฐะทะพะฒะฐั)
2. **Idle** โ ัะฟะพะบะพะนะฝะพะต ะพะถะธะดะฐะฝะธะต (ัะธะบะป)
3. **Thinking** โ ัะฐะทะผััะปะตะฝะธะต ั ะฟะปะฐะฝัะตัะพะผ (ัะธะบะป)
4. **Talking** โ ะถะตััะธะบัะปััะธั ะฟัะธ ะพัะฒะตัะต (ัะธะบะป)

**ะะพะณะธะบะฐ ะฟะตัะตะบะปััะตะฝะธั:**

```
ะะฐะณััะทะบะฐ โ Hello (1 ัะฐะท) โ Idle (ัะธะบะป)
                              โ
ะะพะฟัะพั โ Thinking (ัะธะบะป) โ Talking (ัะธะบะป) โ Idle (ะฒะพะทะฒัะฐั)
```

**ะะฝัะตัะตัะฝัะต ะพัะพะฑะตะฝะฝะพััะธ:**

- **ะะฒัะพะผะฐัะธัะตัะบะธะน ะผะฐัััะฐะฑ** โ ะผะพะดะตะปั ะฝะพัะผะฐะปะธะทัะตััั ะดะพ ะฒััะพัั 2 ะตะดะธะฝะธัั
- **ะฆะตะฝััะธัะพะฒะฐะฝะธะต** โ ะผะพะดะตะปั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะตะฝััะธััะตััั ะฟะพ X/Z
- **ะขะฐะนะผะตั Idle** โ ัะตัะตะท 5 ัะตะบ ะฑะตะท ะดะตะนััะฒะธะน ะทะฐะฟััะบะฐะตััั Idle ะฐะฝะธะผะฐัะธั
- **ะะปะฐะฒะฝัะต ะฟะตัะตัะพะดั** โ `fadeOut()` ะดะปั ัะผะตะฝั ะฐะฝะธะผะฐัะธะน
- **Responsive** โ ะฐะดะฐะฟัะธััะตััั ะบ ัะฐะทะผะตัั ะพะบะฝะฐ

**Three.js ะฝะฐัััะพะนะบะธ:**

```javascript
// ะะฐะผะตัะฐ
position: [0, 2, 5]  // ะััะต ะธ ะดะฐะปััะต ะพั ะผะพะดะตะปะธ
lookAt: [0, 1.7, 0]  // ะกะผะพััะธั ัััั ะฒััะต ัะตะฝััะฐ

// ะัะฒะตัะตะฝะธะต
AmbientLight: 1.0    // ะะฑัะตะต ะพัะฒะตัะตะฝะธะต
DirectionalLight: 1.5 // ะะฐะฟัะฐะฒะปะตะฝะฝัะน ัะฒะตั
FillLight: 0.5       // ะะพะบะพะฒะฐั ะฟะพะดัะฒะตัะบะฐ
```

---

### 9. **PROMT.md** โ ะะฐะทะฐ ะทะฝะฐะฝะธะน

**ะะฐะทะฝะฐัะตะฝะธะต:** ะกัััะบัััะธัะพะฒะฐะฝะฝะฐั ะธะฝัะพัะผะฐัะธั ะพ ะบะพะผะฟะฐะฝะธะธ ะขัะฐะฝัะฝะตััั.

**ะะฐะทะดะตะปั:**

1. **ะะฝััััะบัะธั ะดะปั AI** โ ัะธะฟั ะฒะพะฟัะพัะพะฒ ะธ ัะพะพัะฒะตัััะฒัััะธะต ะพัะฒะตัั
2. **ะะฝัะพัะผะฐัะธั ะพ ะบะพะผะฟะฐะฝะธะธ** โ ะดะฐัั, ััััะบัััะฐ ะบะฐะฟะธัะฐะปะฐ
3. **ะัะฝะพะฒะฝัะต ะฝะฐะฟัะฐะฒะปะตะฝะธั ะดะตััะตะปัะฝะพััะธ**
4. **ะะปััะตะฒัะต ะพัะณะฐะฝะธะทะฐัะธะธ** โ ัะตะตัััะพะดะตัะถะฐัะตะปั, ะฐัะดะธัะพั
5. **ะะพัะฟะพัะฐัะธะฒะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต** โ ะพัะณะฐะฝั ัะฟัะฐะฒะปะตะฝะธั, ะบะพะผะธัะตัั
6. **ะััะฟะฝัะต ะฟัะพะตะบัั** โ ะะกะขะ, ะะขะก-2, ะะขะ ะธ ะดั. (ั ะดะตัะฐะปัะผะธ)
7. **ะััะพัะธัะตัะบะฐั ััะพะฝะพะปะพะณะธั** โ ะพั 1863 ะดะพ 2019
8. **ะะฝัะตัะตัะฝัะต ัะฐะบัั** โ ัะตะบะพัะดั, ัะตัะฝะธัะตัะบะธะต ัะฐัะฐะบัะตัะธััะธะบะธ

**ะะฑัะตะผ:** ~9KB ัะตะบััะฐ, ะพัะฒะฐััะฒะฐะตั 17 ะฒะพะฟัะพัะพะฒ ะฑะตะฝัะผะฐัะบะฐ

**ะะฒัะพะทะฐะณััะทะบะฐ:** main.py ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะถะฐะตั PROMT.md ะฒ ัะธััะตะผะฝัะน ะฟัะพะผะฟั

---

### 10. **QA.py** โ ะะตะฝัะผะฐัะบ ัะธััะตะผะฐ

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตััะธัะพะฒะฐะฝะธะต LLM ะฝะฐ 17 ะฒะพะฟัะพัะฐั ะธะท `gobench.md`.

**ะคัะฝะบัะธะธ:**

- ะะฐััะธะฝะณ ะฒะพะฟัะพัะพะฒ ะธะท markdown
- ะะพัะปะตะดะพะฒะฐัะตะปัะฝะฐั ะณะตะฝะตัะฐัะธั ะพัะฒะตัะพะฒ
- ะะพะณะธัะพะฒะฐะฝะธะต thinking + answer ะฒ ัะฐะนะป
- ะะฐะปะธะดะฐัะธั (ะฟัะพะฒะตัะบะฐ ััะพ ะฒัะต 17 ะฒะพะฟัะพัะพะฒ ะฝะฐะนะดะตะฝั)

**ะัะธะผะตั ะฒะพะฟัะพัะฐ:**

```markdown
**1. ะะพะณะดะฐ ะฑัะปะฐ ะพัะฝะพะฒะฐะฝะฐ ะบะพะผะฟะฐะฝะธั ะะะ ยซะขัะฐะฝัะฝะตัััยป?**
```

**ะคะพัะผะฐั ะปะพะณะฐ ะฑะตะฝัะผะฐัะบะฐ:**

```
================================================================================
QA BENCHMARK - ะขะตััะธัะพะฒะฐะฝะธะต LLM ะฟะพ ะฒะพะฟัะพัะฐะผ ะพ ะะะ ยซะขัะฐะฝัะฝะตัััยป
ะะฐัะฐ ะทะฐะฟััะบะฐ: 2025-10-18 20:00:00
ะะพะดะตะปั: .../Qwen3-4B-Thinking-abliterated.Q4_K_S.gguf
ะะพะปะธัะตััะฒะพ ะฒะพะฟัะพัะพะฒ: 17
================================================================================

================================================================================
๐ ะะะะะะก 1/17
================================================================================
ะะพะณะดะฐ ะฑัะปะฐ ะพัะฝะพะฒะฐะฝะฐ ะบะพะผะฟะฐะฝะธั ะะะ ยซะขัะฐะฝัะฝะตัััยป?
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ญ ะะะะะซะจะะะะะฏ:
[thinking content]
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะขะะะข:
[answer content]
```

**ะะฐะฟััะบ:**

```bash
python QA.py
```

---

### 11. **import_model.py** โ ะะผะฟะพัั 3D ะผะพะดะตะปะธ

**ะะฐะทะฝะฐัะตะฝะธะต:** Blender ัะบัะธะฟั ะดะปั ะธะผะฟะพััะฐ FBX ะฐะฝะธะผะฐัะธะน ะธ ัะบัะฟะพััะฐ ะฒ GLB.

**ะัะพัะตัั:**

1. ะัะธััะบะฐ ััะตะฝั Blender
2. ะะผะฟะพัั ะฑะฐะทะพะฒะพะน ะผะพะดะตะปะธ `Idle.fbx` (ั ัะบะตะปะตัะพะผ)
3. ะัะธะผะตะฝะตะฝะธะต ัะตะบััััั `Bot.png`
4. ะะผะฟะพัั ะพััะฐะปัะฝัั ะฐะฝะธะผะฐัะธะน: Hello, Talking, Thinking
5. ะัะธะฒัะทะบะฐ ะผะพะดะตะปะธ ะบ ัะบะตะปะตัั (ะตัะปะธ ะฝัะถะฝะพ)
6. ะญะบัะฟะพัั ะฒ `static/models/transneft_character.glb`

**ะัะพะฑะตะฝะฝะพััะธ:**

- ะะฒัะพะผะฐัะธัะตัะบะฐั ัะพะฒะผะตััะธะผะพััั ั Blender 3.x ะธ 4.x
- ะัะพะฒะตัะบะฐ ะฟัะธะฒัะทะบะธ ะผะพะดะตะปะธ ะบ ัะบะตะปะตัั
- ะะฐะปะธะดะฐัะธั ะฒัะตั ะฐะฝะธะผะฐัะธะน ะฟะตัะตะด ัะบัะฟะพััะพะผ
- ะัะฒะพะด ัะฐะทะผะตัะฐ ะธัะพะณะพะฒะพะณะพ GLB ัะฐะนะปะฐ

**ะะฐะฟััะบ ะฒ Blender:**

```bash
blender --background --python import_model.py
```

---

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ะะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ (Windows)

1. **ะกะพะทะดะฐะนัะต ัะฐะนะป `install_and_run.bat`:**

```batch
@echo off
echo ========================================
echo AI-ะะพะฝััะปััะฐะฝั ะขัะฐะฝัะฝะตััั
echo ะะฒัะพัััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ
echo ========================================
echo.

REM ะัะพะฒะตัะบะฐ ะฝะฐะปะธัะธั Python
python --version >nul 2>&1
if errorlevel 1 (
    echo ะะจะะะะ: Python ะฝะต ะฝะฐะนะดะตะฝ!
    echo ะฃััะฐะฝะพะฒะธัะต Python 3.10+ ั python.org
    pause
    exit /b 1
)

REM ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั (ะตัะปะธ ะฝะตั)
if not exist "venv" (
    echo ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั...
    python -m venv venv
)

REM ะะบัะธะฒะฐัะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
echo ะะบัะธะฒะฐัะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั...
call venv\Scripts\activate.bat

REM ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
echo ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน...
pip install --upgrade pip
pip install -r requirements.txt

REM ะะฐะฟััะบ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั
echo.
echo ========================================
echo ะะฐะฟััะบ ะฒะตะฑ-ัะตัะฒะตัะฐ...
echo ะัะบัะพะนัะต ะฑัะฐัะทะตั: http://localhost:5000
echo ========================================
echo.
python web_app.py

pause
```

2. **ะะฐะฟัััะธัะต `install_and_run.bat`**

### ะััะฝะฐั ัััะฐะฝะพะฒะบะฐ

#### ะจะฐะณ 1: ะฃััะฐะฝะพะฒะบะฐ Python

ะขัะตะฑัะตััั **Python 3.10+**

ะกะบะฐัะฐัั: https://www.python.org/downloads/

#### ะจะฐะณ 2: ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone https://github.com/your-username/transneft-ai-consultant.git
cd transneft-ai-consultant
```

#### ะจะฐะณ 3: ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

#### ะจะฐะณ 4: ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

**ะะปั GPU ะฟะพะดะดะตัะถะบะธ (NVIDIA CUDA):**

```bash
pip install llama-cpp-python[cublas] --force-reinstall --no-cache-dir
```

#### ะจะฐะณ 5: ะกะบะฐัะธะฒะฐะฝะธะต ะผะพะดะตะปะธ

ะกะบะฐัะฐะนัะต **Qwen3-4B-Thinking** (abliterated, Q4_K_S):

```
https://huggingface.co/mradermacher/Huihui-Qwen3-4B-Thinking-2507-abliterated-GGUF
```

ะคะฐะนะป: `Huihui-Qwen3-4B-Thinking-2507-abliterated.Q4_K_S.gguf`

#### ะจะฐะณ 6: ะะฐัััะพะนะบะฐ ะบะพะฝัะธะณััะฐัะธะธ

ะััะตะดะฐะบัะธััะนัะต `config.py`:

```python
# ะฃะบะฐะถะธัะต ะฟััั ะบ ัะบะฐัะฐะฝะฝะพะน ะผะพะดะตะปะธ
MODEL_PATH = "ะฟััั/ะบ/Qwen3-4B-Thinking.gguf"

# ะะฐัััะพะนัะต GPU (ะตัะปะธ ะตััั)
GPU_LAYERS = -1  # -1 = ะฒัะต ัะปะพะธ ะฝะฐ GPU
MAIN_GPU = 0     # ะะฝะดะตะบั ะพัะฝะพะฒะฝะพะณะพ GPU
```

#### ะจะฐะณ 7: ะะฐะฟััะบ

**ะะตะฑ-ะธะฝัะตััะตะนั:**

```bash
python web_app.py
```

ะัะบัะพะนัะต: http://localhost:5000

**ะะพะฝัะพะปัะฝัะน ัะตะถะธะผ:**

```bash
python main.py
```

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

ะัะต ะฝะฐัััะพะนะบะธ ะฝะฐัะพะดัััั ะฒ **`config.py`**

### ะัะฝะพะฒะฝัะต ะฟะฐัะฐะผะตััั

```python
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ะะะะะะฌ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
MODEL_PATH = "ะฟััั/ะบ/ะผะพะดะตะปะธ.gguf"
CONTEXT_SIZE = 32768  # 32K ัะพะบะตะฝะพะฒ
GPU_LAYERS = -1       # -1 = ะฒัะต ะฝะฐ GPU
BATCH_SIZE = 512      # ะะฐะทะผะตั ะฑะฐััะฐ

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ะะะะะะะฆะะฏ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
TEMPERATURE = 0.6     # ะัะตะฐัะธะฒะฝะพััั (0.0-1.0)
TOP_P = 0.95         # Nucleus sampling
TOP_K = 20           # Top-K sampling
MAX_TOKENS = -1      # -1 = ะฑะตะท ะพะณัะฐะฝะธัะตะฝะธะน

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ะะะะะกะะะะ ะะะะ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
STT_ENABLED = True
STT_ENGINE = "google"           # google/whisper_api
STT_LANGUAGE = "ru-RU"
SILENCE_THRESHOLD = 2.0         # ะกะตะบ ัะธัะธะฝั โ ะพัะฟัะฐะฒะบะฐ
INACTIVITY_TIMEOUT = 5.0        # ะกะตะบ ะฑะตะท ัะตัะธ โ ะพัะบะปััะตะฝะธะต
VOICE_VOLUME_THRESHOLD = 500    # ะะพัะพะณ ะณัะพะผะบะพััะธ

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ะะะะฃะงะะะะะะ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
TTS_ENABLED = True
TTS_ENGINE = "pyttsx3"          # pyttsx3/elevenlabs
TTS_RATE = 150                  # ะกะปะพะฒ/ะผะธะฝ (ัะตะฐะปัะฝะพ *1.2)
TTS_VOLUME = 0.9                # ะัะพะผะบะพััั (0.0-1.0)
TTS_PREFER_MALE = True          # ะัะตะดะฟะพัะธัะฐัั ะผัะถัะบะพะน ะณะพะปะพั

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ะะะะะะ ะ ะะะกะขะซ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
VISION_ENABLED = False          # ะะบะปััะธัั/ะฒัะบะปััะธัั
CAMERA_DEVICE_ID = 0            # ะะฝะดะตะบั ะบะฐะผะตัั
CAMERA_FPS = 16                 # ะะฐะดัะพะฒ ะฒ ัะตะบัะฝะดั
CAMERA_RESOLUTION = [640, 480]  # ะะฐะทัะตัะตะฝะธะต
GESTURE_CONFIDENCE = 0.6        # ะะพัะพะณ ัะฒะตัะตะฝะฝะพััะธ (0.0-1.0)
GESTURE_CONFIRMATION_TIME = 1.5 # ะกะตะบ ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั
GESTURE_INACTIVITY_TIMEOUT = 7.0 # ะกะตะบ โ ะฐะฒัะพะพัะบะปััะตะฝะธะต
```

### ะะฟัะธะผะธะทะฐัะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

**ะะปั ัะปะฐะฑะพะณะพ GPU (4-6 GB VRAM):**

```python
GPU_LAYERS = 35           # ะงะฐััะธัะฝะฐั ะฒัะณััะทะบะฐ
CONTEXT_SIZE = 16384      # ะฃะผะตะฝััะตะฝะฝัะน ะบะพะฝัะตะบัั
KV_CACHE_TYPE_K = "q4_0"  # ะะพะปะตะต ะฐะณัะตััะธะฒะฝะฐั ะบะฒะฐะฝัะธะทะฐัะธั
KV_CACHE_TYPE_V = "q4_0"
```

**ะะปั ะผะพัะฝะพะณะพ GPU (12+ GB VRAM):**

```python
GPU_LAYERS = -1           # ะะพะปะฝะฐั ะฒัะณััะทะบะฐ
CONTEXT_SIZE = 65536      # ะะพะปััะพะน ะบะพะฝัะตะบัั
BATCH_SIZE = 1024         # ะะพะปััะพะน ะฑะฐัั
FLASH_ATTENTION = True    # Flash Attention
```

**ะขะพะปัะบะพ CPU:**

```python
GPU_LAYERS = 0            # ะะตะท GPU
CONTEXT_SIZE = 16384      # ะะตะฝััะต ะบะพะฝัะตะบัั
BATCH_SIZE = 256          # ะะตะฝััะต ะฑะฐัั
```

---

## ๐ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะตะฑ-ะธะฝัะตััะตะนั

#### 1. ะขะตะบััะพะฒัะน ะฒะฒะพะด

- ะะฒะตะดะธัะต ะฒะพะฟัะพั ะฒ ะฟะพะปะต
- ะะฐะถะผะธัะต **ะัะฟัะฐะฒะธัั** ะธะปะธ **Enter**
- ะะฐะฑะปัะดะฐะนัะต ะทะฐ 3D ะฟะตััะพะฝะฐะถะตะผ:
  - **Thinking** โ ะพะฑะดัะผัะฒะฐะตั ะพัะฒะตั
  - **Talking** โ ะถะตััะธะบัะปะธััะตั ะฟัะธ ะพัะฒะตัะต
  - **Idle** โ ะฒะพะทะฒัะฐั ะฒ ัะฟะพะบะพะนะฝะพะต ัะพััะพัะฝะธะต

#### 2. ะะพะปะพัะพะฒะพะน ะฒะฒะพะด

- ะะฐะถะผะธัะต **๐ค ะะธะบัะพัะพะฝ**
- ะะพะฒะพัะธัะต ะฒะพะฟัะพั
- **2 ัะตะบ ัะธัะธะฝั** โ ัะตะบัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพัะฟัะฐะฒะธััั AI
- **5 ัะตะบ ะฑะตะท ัะตัะธ** โ ะผะธะบัะพัะพะฝ ะฐะฒัะพะพัะบะปััะธััั

#### 3. ะะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ะถะตััะพะฒ

- ะะฐะถะผะธัะต **๐น ะะฐะผะตัะฐ**
- ะะพะบะฐะถะธัะต ะถะตัั ััะบะฐะผะธ:
  - โ **ะัะบัััะฐั ะปะฐะดะพะฝั** โ "ะัะธะฒะตั"
  - โ๏ธ **ะะพะฑะตะดะฐ** โ "ะะพะฑะตะดะฐ"
  - ๐ **ะะพะปััะพะน ะฟะฐะปะตั ะฒะฒะตัั** โ "ะกัะฟะตั"
  - โ๏ธ **ะฃะบะฐะทะฐัะตะปัะฝัะน ะฟะฐะปะตั** โ "ะะฝะธะผะฐะฝะธะต"
- ะะพะฒัะพัะธัะต ะถะตัั 3+ ัะฐะท ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั
- ะขะตะบัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพัะฟัะฐะฒะธััั AI

#### 4. ะะทะฒััะธะฒะฐะฝะธะต ะพัะฒะตัะพะฒ

- ะะฐะถะผะธัะต **๐ ะะธะฝะฐะผะธะบ** ะดะปั ะฐะฒัะพะพะทะฒััะบะธ
- ะัะฒะตัั ะฑัะดัั ะฟัะพะณะพะฒะฐัะธะฒะฐัััั ะฒัะปัั
- ะัะบะปััะธัะต ะดะปั ัะธัะธะฝั

### ะะพะฝัะพะปัะฝัะน ัะตะถะธะผ

```bash
python main.py
```

**ะะพะผะฐะฝะดั:**

- `exit`, `quit` โ ะฒััะพะด
- `clear`, `cls` โ ะพัะธััะบะฐ ะธััะพัะธะธ
- `history` โ ะฟะพะบะฐะทะฐัั ะธััะพัะธั ะดะธะฐะปะพะณะฐ
- `listen` โ ะณะพะปะพัะพะฒะพะน ะฒะฒะพะด (ะตัะปะธ ะดะพัััะฟะตะฝ)
- `vision start` โ ะทะฐะฟััะบ ะบะฐะผะตัั
- `vision stop` โ ะพััะฐะฝะพะฒะบะฐ ะบะฐะผะตัั
- `cameras` โ ัะฟะธัะพะบ ะบะฐะผะตั
- `camera <id>` โ ะฟะตัะตะบะปััะตะฝะธะต ะบะฐะผะตัั

### ะะตะฝัะผะฐัะบ

```bash
python QA.py
```

ะขะตััะธััะตั ะผะพะดะตะปั ะฝะฐ 17 ะฒะพะฟัะพัะฐั ะธะท `gobench.md` ะธ ัะพััะฐะฝัะตั ัะตะทัะปััะฐัั ะฒ ะปะพะณ-ัะฐะนะป.

---

## ๐ฌ ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### Thinking Mode

ะะพะดะตะปั **Qwen3-4B-Thinking** ะฟะพะดะดะตัะถะธะฒะฐะตั ัะตะถะธะผ ัะฐัััะถะดะตะฝะธะน:

```xml
<think>
ะะพะปัะทะพะฒะฐัะตะปั ัะฟัะฐัะธะฒะฐะตั ะพ ะดะฐัะต ะพัะฝะพะฒะฐะฝะธั ะบะพะผะฟะฐะฝะธะธ.
ะ ะฑะฐะทะต ะทะฝะฐะฝะธะน ัะบะฐะทะฐะฝะพ: ัััะตะถะดะตะฝะฐ 14.08.1993, 
ะณะพััะดะฐัััะฒะตะฝะฝะฐั ัะตะณะธัััะฐัะธั 26.08.1993.
ะัะถะฝะพ ัะบะฐะทะฐัั ะพะฑะต ะดะฐัั ะดะปั ะฟะพะปะฝะพัั ะพัะฒะตัะฐ.
</think>

ะะะ ยซะขัะฐะฝัะฝะตัััยป ะฑัะปะพ ัััะตะถะดะตะฝะพ 14 ะฐะฒะณัััะฐ 1993 ะณะพะดะฐ 
ะฟะพััะฐะฝะพะฒะปะตะฝะธะตะผ ะัะฐะฒะธัะตะปัััะฒะฐ ะะค โ810. ะะพััะดะฐัััะฒะตะฝะฝะฐั 
ัะตะณะธัััะฐัะธั ัะพััะพัะปะฐัั 26 ะฐะฒะณัััะฐ 1993 ะณะพะดะฐ.
```

**ะัะตะธะผััะตััะฒะฐ:**

- โ ะะพะปะตะต ัะพัะฝัะต ะพัะฒะตัั
- โ ะัััะตะต ะฟะพะฝะธะผะฐะฝะธะต ะบะพะฝัะตะบััะฐ
- โ ะะตะฝััะต ะณะฐะปะปััะธะฝะฐัะธะน
- โ ะะพะบะฐะทัะฒะฐะตั ะปะพะณะธะบั ัะฐัััะถะดะตะฝะธะน

**ะะตะดะพััะฐัะพะบ:**

- โ ะะตะผะฝะพะณะพ ะผะตะดะปะตะฝะฝะตะต ะณะตะฝะตัะฐัะธั (~50%-200% ะฑะพะปััะต ัะพะบะตะฝะพะฒ)

### GPU ะพะฟัะธะผะธะทะฐัะธั

**ะะพะปะฝะฐั ะฒัะณััะทะบะฐ ะฝะฐ GPU (`GPU_LAYERS = -1`):**

```
RTX 3060 (12GB): ~30 tokens/sec
RTX 4070 (12GB): ~45 tokens/sec
RTX 4090 (24GB): ~75 tokens/sec
```

**KV-cache ะบะฒะฐะฝัะธะทะฐัะธั:**

```python
KV_CACHE_TYPE_K = "q8_0"  # ะญะบะพะฝะพะผะธั ~40% VRAM
KV_CACHE_TYPE_V = "q8_0"  # ะะธะฝะธะผะฐะปัะฝะฐั ะฟะพัะตัั ะบะฐัะตััะฒะฐ
```

**Flash Attention:**

```python
FLASH_ATTENTION = True  # +20-30% ัะบะพัะพััั
```

### ะกััะธะผะธะฝะณ ะพัะฒะตัะพะฒ

**Server-Sent Events (SSE):**

```
data: {"type": "thinking", "content": "..."}

data: {"type": "answer", "content": "ะงะฐััั 1. "}

data: {"type": "answer", "content": "ะงะฐััั 1. ะงะฐััั 2. "}

data: {"type": "done"}
```

**ะัะตะธะผััะตััะฒะฐ:**

- ะะณะฝะพะฒะตะฝะฝะฐั ะพะฑัะฐัะฝะฐั ัะฒัะทั
- ะะปะฐะฒะฝะพะต ะฟะพัะฒะปะตะฝะธะต ัะตะบััะฐ
- ะะตะฝััะต ะฒะพัะฟัะธะฝะธะผะฐะตะผะพะน ะทะฐะดะตัะถะบะธ

### ะะพะณะธัะพะฒะฐะฝะธะต

**ะคะพัะผะฐั ะปะพะณะพะฒ:**

```
chat_logs/
โโโ web_session.log            # ะะตะฑ-ะธะฝัะตััะตะนั
โโโ chat_20251018_193045.log   # ะะพะฝัะพะปัะฝัะน ัะตะถะธะผ
โโโ qa_benchmark_20251018_200000.log  # ะะตะฝัะผะฐัะบ
```

**ะกะพะดะตัะถะธะผะพะต:**

- Timestamp ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั
- ะััะพัะฝะธะบ (text/voice/gesture)
- Thinking ะฟัะพัะตัั
- ะคะธะฝะฐะปัะฝัะน ะพัะฒะตั
- ะกัะฐัะธััะธะบะฐ ัะตััะธะธ

---

## ๐จ ะัะพะฑะตะฝะฝะพััะธ ัะตะฐะปะธะทะฐัะธะธ

### 1. ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฟัะฐะฒะปะตะฝะธะต ะผะธะบัะพัะพะฝะพะผ

**ะัะพะฑะปะตะผะฐ:** ะะฐะบ ะฟะพะฝััั, ะบะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะทะฐะบะพะฝัะธะป ะณะพะฒะพัะธัั?

**ะะตัะตะฝะธะต:**

```python
# ะะฒััััะพะฒะฝะตะฒะฐั ัะธััะตะผะฐ ัะฐะนะผะตัะพะฒ
SILENCE_THRESHOLD = 2.0      # 2 ัะตะบ ัะธัะธะฝั = ะบะพะฝะตั ััะฐะทั
INACTIVITY_TIMEOUT = 5.0     # 5 ัะตะบ ะฑะตะท ัะตัะธ = ะพัะบะปััะตะฝะธะต

# ะะพะณะธะบะฐ
while recording:
    if volume > THRESHOLD:
        last_speech_time = now()
        has_speech = True
    else:
        silence_duration = now() - last_speech_time
        
        if silence_duration > 2.0 and has_speech:
            # ะะฐัะฟะพะทะฝะฐัั ะธ ะพัะฟัะฐะฒะธัั ัะตะบัั
            recognize_and_send()
            has_speech = False
        
        if silence_duration > 5.0:
            # ะะพะปะฝะพัััั ะพัะบะปััะธัั ะผะธะบัะพัะพะฝ
            stop_recording()
```

### 2. ะะพะดัะฒะตัะถะดะตะฝะธะต ะถะตััะพะฒ

**ะัะพะฑะปะตะผะฐ:** ะะทะฑะตะถะฐัั ะปะพะถะฝัั ััะฐะฑะฐััะฒะฐะฝะธะน ัะปััะฐะนะฝัั ะถะตััะพะฒ.

**ะะตัะตะฝะธะต:**

```python
# ะััะตั ะถะตััะพะฒ ะทะฐ ะฟะพัะปะตะดะฝะธะต 1.5 ัะตะบัะฝะดั
gesture_buffer = []

# ะะพะณะธะบะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั
def check_confirmation():
    if len(gesture_buffer) >= 3:
        most_common = get_most_common_gesture()
        if most_common != last_confirmed:
            confirm_and_send(most_common)
            last_confirmed = most_common
```

### 3. ะะฐัะทะฐ ะถะตััะพะฒ ะฝะฐ ะฒัะตะผั AI

**ะัะพะฑะปะตะผะฐ:** ะะตััั ะฒะพ ะฒัะตะผั ะพัะฒะตัะฐ AI ะผะพะณัั ะผะตัะฐัั.

**ะะตัะตะฝะธะต:**

```python
# ะ web_app.py
def chat():
    # ะกะพััะฐะฝัะตะผ ัะพััะพัะฝะธะต ะถะตััะพะฒ
    gesture_was_active = vision_handler.is_vision_active
    
    if gesture_was_active:
        vision_handler.pause_analysis()  # ะะฐัะทะฐ (ะบะฐะผะตัะฐ ัะฐะฑะพัะฐะตั)
    
    # ะะตะฝะตัะฐัะธั ะพัะฒะตัะฐ
    yield streaming_response
    
    # ะะพะทะพะฑะฝะพะฒะปัะตะผ ะถะตััั
    if gesture_was_active:
        vision_handler.resume_analysis()
```

### 4. ะะฑัะตะทะบะฐ ะธััะพัะธะธ ะดะธะฐะปะพะณะฐ

**ะัะพะฑะปะตะผะฐ:** ะััะพัะธั ะผะพะถะตั ะฟัะตะฒััะธัั ะบะพะฝัะตะบัั ะผะพะดะตะปะธ (32K ัะพะบะตะฝะพะฒ).

**ะะตัะตะฝะธะต:**

```python
def _trim_conversation_history(self):
    # ะกะธััะตะผะฝะพะต ัะพะพะฑัะตะฝะธะต ะฒัะตะณะดะฐ ัะพััะฐะฝัะตะผ
    system_msgs = [m for m in history if m['role'] == 'system']
    other_msgs = [m for m in history if m['role'] != 'system']
    
    # ะะฑัะฐะฑะฐััะฒะฐะตะผ ัะพะพะฑัะตะฝะธั ะฒ ะพะฑัะฐัะฝะพะผ ะฟะพััะดะบะต (ะฝะพะฒัะต โ ััะฐััะต)
    kept_msgs = []
    total_tokens = 0
    
    for msg in reversed(other_msgs):
        msg_tokens = count_tokens(msg)
        if total_tokens + msg_tokens <= max_history_tokens:
            kept_msgs.insert(0, msg)
            total_tokens += msg_tokens
        else:
            break
    
    # ะะฑะฝะพะฒะปัะตะผ ะธััะพัะธั
    self.conversation_history = system_msgs + kept_msgs
```

### 5. ะะดะฐะฟัะธะฒะฝะฐั 3D ะผะพะดะตะปั

**ะัะพะฑะปะตะผะฐ:** ะะพะดะตะปะธ ะผะพะณัั ะธะผะตัั ัะฐะทะฝัะน ัะฐะทะผะตั ะธ ะฟะพะทะธัะธั.

**ะะตัะตะฝะธะต:**

```javascript
// ะะฒัะพะผะฐัะธัะตัะบะธะน ัะฐััะตั ะผะฐัััะฐะฑะฐ ะธ ะฟะพะทะธัะธะธ
const box = new THREE.Box3().setFromObject(model);
const size = box.getSize(new THREE.Vector3());
const center = box.getCenter(new THREE.Vector3());

// ะะพัะผะฐะปะธะทะฐัะธั ะดะพ ะฒััะพัั 2 ะตะดะธะฝะธัั
const maxSize = Math.max(size.x, size.y, size.z);
const scale = 2 / maxSize;
model.scale.set(scale, scale, scale);

// ะฆะตะฝััะธัะพะฒะฐะฝะธะต ะธ ัััะฐะฝะพะฒะบะฐ ะฝะฐ "ะฟะพะป"
model.position.set(
    -center.x * scale,  // ะฆะตะฝัั ะฟะพ X
    0,                  // ะะฐ ััะพะฒะฝะต ะทะตะผะปะธ
    -center.z * scale   // ะฆะตะฝัั ะฟะพ Z
);
```

### 6. ะัะธััะบะฐ ัะตะบััะฐ ะดะปั TTS

**ะัะพะฑะปะตะผะฐ:** ะญะผะพะดะทะธ ะธ ัะฟะตััะธะผะฒะพะปั ะฒัะทัะฒะฐัั ะพัะธะฑะบะธ ะพะทะฒััะบะธ.

**ะะตัะตะฝะธะต:**

```python
import re

# ะฃะดะฐะปะตะฝะธะต ัะผะพะดะทะธ
text = re.sub(r'[\U0001F600-\U0001F64F\U0001F300-\U0001F5FF...]', '', text)

# ะะฐะผะตะฝะฐ ะผะฝะพะถะตััะฒะตะฝะฝัั ะฒะพัะบะปะธัะฐัะตะปัะฝัั ะทะฝะฐะบะพะฒ
text = re.sub(r'!+', '.', text)

# ะัะธััะบะฐ ะฟัะพะฑะตะปะพะฒ
text = re.sub(r'\s+', ' ', text).strip()
```

---

## ๐ ะัะตะธะผััะตััะฒะฐ ัะธััะตะผั

โ **ะะพะปะฝะฐั ะบะพะฝัะธะดะตะฝัะธะฐะปัะฝะพััั** โ ะฒัะต ัะฐะฑะพัะฐะตั ะปะพะบะฐะปัะฝะพ, ะฑะตะท ะพัะฟัะฐะฒะบะธ ะดะฐะฝะฝัั  
โ **Thinking mode** โ ะฟัะพะทัะฐัะฝัะน ะฟัะพัะตัั ัะฐัััะถะดะตะฝะธะน  
โ **ะัะปััะธะผะพะดะฐะปัะฝะพััั** โ ัะตะบัั, ะณะพะปะพั, ะถะตััั, 3D ะฟะตััะพะฝะฐะถ  
โ **GPU ััะบะพัะตะฝะธะต** โ ะดะพ 75 tokens/sec ะฝะฐ RTX 4090 (5060ti - 115t/s)
โ **ะะธะฑะบะฐั ะบะพะฝัะธะณััะฐัะธั** โ ะฒัะต ะฝะฐัััะพะนะบะธ ะฒ ะพะดะฝะพะผ ัะฐะนะปะต  
โ **ะะฐััะธััะตะผะพััั** โ ะปะตะณะบะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะต ะถะตััั/ััะฝะบัะธะธ  
โ **ะะพะณะธัะพะฒะฐะฝะธะต** โ ะฟะพะปะฝะฐั ะธััะพัะธั ะดะธะฐะปะพะณะพะฒ ะดะปั ะฐะฝะฐะปะธะทะฐ  

---

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะกะธััะตะผะฝัะต ััะตะฑะพะฒะฐะฝะธั

**ะะธะฝะธะผะฐะปัะฝัะต (CPU only):**
- CPU: 4 ัะดัะฐ, 2.5 GHz+
- RAM: 8 GB
- ะกะบะพัะพััั: ~2-5 tokens/sec

**ะะตะบะพะผะตะฝะดะพะฒะฐะฝะฝัะต (GPU):**
- GPU: NVIDIA GTX 1660 (6 GB VRAM) ะธะปะธ ะฒััะต
- RAM: 16 GB
- ะกะบะพัะพััั: ~20-30 tokens/sec

**ะะฟัะธะผะฐะปัะฝัะต:**
- GPU: NVIDIA RTX 4070 (12 GB VRAM) ะธะปะธ ะฒััะต
- RAM: 32 GB
- ะกะบะพัะพััั: ~45-75 tokens/sec

### ะะตะฝัะผะฐัะบ ัะตะทัะปััะฐัั

**ะะพะดะตะปั:** Qwen3-4B-Thinking (Q4_K_S)  
**ะะพะฝัะธะณััะฐัะธั:** RTX 4070, GPU_LAYERS=-1, CONTEXT=32K

| ะะตััะธะบะฐ | ะะฝะฐัะตะฝะธะต |
|---------|----------|
| ะกะบะพัะพััั ะณะตะฝะตัะฐัะธะธ | 45-50 tokens/sec |
| ะัะตะผั ะทะฐะณััะทะบะธ ะผะพะดะตะปะธ | ~3-5 ัะตะบ |
| VRAM ะธัะฟะพะปัะทะพะฒะฐะฝะธะต | ~4.5 GB |
| ะกัะตะดะฝัั ะดะปะธะฝะฐ ะพัะฒะตัะฐ | 200-400 ัะพะบะตะฝะพะฒ |
| ะัะตะผั ะพัะฒะตัะฐ (thinking) | 8-12 ัะตะบ |
| ะัะตะผั ะพัะฒะตัะฐ (instruct) | 5-8 ัะตะบ |
| ะขะพัะฝะพััั ะฝะฐ ะฑะตะฝัะผะฐัะบะต | 95%+ |

---

## ๐ ะะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ะถะตััะพะฒ

**ะจะฐะณ 1:** ะะพะฑะฐะฒััะต ะถะตัั ะฒ `vision_handler.py`:

```python
gesture_text_map = {
    'open_palm': 'ะัะธะฒะตั',
    'victory': 'ะะพะฑะตะดะฐ',
    'thumb_up': 'ะกัะฟะตั',
    'pointing_up': 'ะะฝะธะผะฐะฝะธะต',
    'closed_fist': 'ะกัะพะฟ',  # โ ะะพะฒัะน ะถะตัั
}
```

**ะจะฐะณ 2:** ะะฑะฝะพะฒะธัะต ะพะฟะธัะฐะฝะธั:

```python
gesture_descriptions = {
    # ...
    "closed_fist": "โ ะัะปะฐะบ",
}
```

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ะฐะฝะธะผะฐัะธะน

**ะจะฐะณ 1:** ะกะบะฐัะฐะนัะต FBX ั Mixamo  
**ะจะฐะณ 2:** ะะพะผะตััะธัะต ะฒ ะฟะฐะฟะบั `3D/`  
**ะจะฐะณ 3:** ะะฑะฝะพะฒะธัะต `import_model.py`:

```python
animations = {
    "Hello": "Hello.fbx",
    "Idle": "Idle.fbx",
    "Talking": "Talking.fbx",
    "Thinking": "Thinking.fbx",
    "Waving": "Waving.fbx",  # โ ะะพะฒะฐั ะฐะฝะธะผะฐัะธั
}
```

**ะจะฐะณ 4:** ะะฐะฟัััะธัะต ะธะผะฟะพัั ะฒ Blender  
**ะจะฐะณ 5:** ะะพะฑะฐะฒััะต ะผะตัะพะด ะฒ `character3d.js`:

```javascript
startWaving() {
    this.playAnimation('Waving', true);
}
```

### ะะฝัะตะณัะฐัะธั ั ะดััะณะธะผะธ ะผะพะดะตะปัะผะธ

**ะะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะดััะณะพะน GGUF ะผะพะดะตะปะธ:**

1. ะกะบะฐัะฐะนัะต ะผะพะดะตะปั
2. ะะฑะฝะพะฒะธัะต `config.py`:

```python
MODEL_PATH = "ะฟััั/ะบ/ะฝะพะฒะพะน/ะผะพะดะตะปะธ.gguf"
```

3. ะัะปะธ ะผะพะดะตะปั ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตั thinking:

```python
SHOW_THINKING_TO_USER = False
```

4. ะะฐัััะพะนัะต ะฟะฐัะฐะผะตััั ะณะตะฝะตัะฐัะธะธ ะฟะพะด ะผะพะดะตะปั

---

## ๐ ะะธัะตะฝะทะธั

MIT License

---

## ๐จโ๐ป ะะฒัะพั

- ะกััะดะตะฝัั ะะขะฃ ะะะะญะ
- **ะะธัะฐะปะธะน ะะตะฝะธัะพะฒ** ะธ **ะะตะฒััะบ ะะฐะปะตัะธั**
- ะัะพะตะบั ะดะปั ัะฐะบะฐัะพะฝะฐ ยซะขัะฐะฝัะฝะตััั โ ะขะตัะฝะพะปะพะณะธะธยป

---

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

- **Qwen Team** โ ะทะฐ ะผะพะดะตะปั Qwen3-4B-Thinking
- **llama.cpp** โ ะทะฐ ะฑัััััะน ะธะฝัะตัะตะฝั GGUF ะผะพะดะตะปะตะน
- **MediaPipe** โ ะทะฐ ะฑะธะฑะปะธะพัะตะบั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะถะตััะพะฒ
- **Mixamo** โ ะทะฐ ะฑะตัะฟะปะฐัะฝัะต ะฐะฝะธะผะฐัะธะธ ะฟะตััะพะฝะฐะถะตะน
- **Three.js** โ ะทะฐ ะฑะธะฑะปะธะพัะตะบั 3D ัะตะฝะดะตัะธะฝะณะฐ
- **ะะะ ยซะขัะฐะฝัะฝะตัััยป** โ ะทะฐ ะธะฝัะพัะผะฐัะธั ะพ ะบะพะผะฟะฐะฝะธะธ

---

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะปะธ ะฒะพะทะฝะธะบะปะธ ะฒะพะฟัะพัั ะธะปะธ ะฟัะพะฑะปะตะผั:

1. ะัะพะฒะตัััะต [ัะฐะทะดะตะป ะบะพะฝัะธะณััะฐัะธะธ](#-ะบะพะฝัะธะณััะฐัะธั)
2. ะะทััะธัะต ะปะพะณะธ ะฒ `chat_logs/`
3. ะัะพะฒะตัััะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12)
4. ะฃะฑะตะดะธัะตัั ััะพ ะผะพะดะตะปั ัะบะฐัะฐะฝะฐ ะธ ะฟััั ะฟัะฐะฒะธะปัะฝัะน

---

**ะัะธััะฝะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั AI-ะะพะฝััะปััะฐะฝัะฐ ยซะขัะฐะฝัะฝะตัััยป! ๐**
